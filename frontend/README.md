# Backlog移行ツール フロントエンド

このプロジェクトは、BacklogプロジェクトをWebブラウザから簡単に移行できるフロントエンドUIです。

## 機能

- **Webフォーム**: 移行設定をWebブラウザから入力
- **自動実行**: `backlog-migration.bat` を自動で実行
- **マッピング管理**: ユーザーマッピングファイルのダウンロード・アップロード
- **リアルタイムログ**: 移行進捗をリアルタイムで確認
- **日本語対応**: 完全に日本語化されたUI

## 前提条件

- Node.js 18以上
- Windows環境（`backlog-migration.bat`が必要）
- 移行元・移行先BacklogのAPIキー

## セットアップ

1. **依存関係のインストール**
   ```bash
   npm install
   ```

2. **開発サーバーの起動**
   ```bash
   npm run dev
   ```

3. **ブラウザでアクセス**
   ```
   http://localhost:3000
   ```

## 使用方法

### 1. 基本設定

以下の情報を入力してください：

- **移行元APIキー**: 移行元BacklogのAPIキー
- **移行元スペースID**: 移行元BacklogのスペースID (例: `your-space` for `https://your-space.backlog.jp`)
- **移行先APIキー**: 移行先BacklogのAPIキー  
- **移行先スペースID**: 移行先BacklogのスペースID
- **プロジェクトキー**: 移行するプロジェクトキー
  - 形式: `移行元プロジェクトキー:移行先プロジェクトキー`
  - 例: `SRC_PRJCT:DST_PRJCT`
  - 同じキーの場合: `PRJCT`

### 2. オプション設定

- **課題番号を一致させる**: 可能な限り課題番号を元の番号に合わせる
- **Wikiを移行しない**: Wiki ページを除外する
- **課題を移行しない**: 課題を除外する  
- **再試行回数**: エラー時の再試行回数（0-10回）

### 3. 移行手順

1. **初期化開始**: フォームを入力して「初期化開始」ボタンをクリック
2. **マッピング確認**: 生成されたユーザーマッピングファイルをダウンロード
3. **マッピング編集**: `users.csv`ファイルを編集してユーザー対応を設定
4. **ファイル再アップロード**: 編集した`users.csv`をアップロード
5. **移行実行**: 「移行を実行」ボタンをクリックして移行開始

## ファイル構成

```
frontend/backlog-migration-ui/
├── src/
│   ├── app/
│   │   ├── api/migration/          # APIエンドポイント
│   │   │   ├── init/route.ts       # 初期化API
│   │   │   ├── execute/route.ts    # 実行API
│   │   │   ├── download/           # ダウンロードAPI
│   │   │   └── upload/             # アップロードAPI
│   │   ├── page.tsx                # メインページ
│   │   ├── layout.tsx              # レイアウト
│   │   └── globals.css             # スタイル
├── package.json
└── README.md
```

## 注意事項

- このフロントエンドは`../../../bin/backlog-migration.bat`を実行します
- 移行処理は時間がかかる場合があります
- APIキーは安全に保管し、他人と共有しないでください
- 移行前に必ずBacklogのデータをバックアップしてください

## トラブルシューティング

### バイナリファイルが見つからないエラー
- `bin/backlog-migration.bat`が正しい場所にあることを確認してください
- パスが正しく設定されていることを確認してください

### 権限エラー
- Windows環境で実行権限があることを確認してください
- 管理者権限で実行してみてください

### タイムアウトエラー  
- 大量のデータを移行する場合は処理に時間がかかります
- コマンドラインから直接実行することを検討してください
